@PART[RAPIER]:FOR[RealPlume]:NEEDS[SmokeScreen]
{
    @MODULE[ModuleEnginesFX]:HAS[#engineID[AirBreathing]]
    {
        !powerEffectName = DELETE
        %runningEffectName = power_open
    }
    @MODULE[ModuleEnginesFX]:HAS[#engineID[ClosedCycle]]
    {
        %runningEffectName = power_closed
    }
    !EFFECTS {}
    EFFECTS
    {
        power_open
        {
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = flamejet
                modelName = RealPlume-Stock/SmokeScreen_MP_Nazari_FX/methanolflame
                transformName = thrustTransform
                fixedScale = 0.8
                localPosition = 0, 0, 0.8
                emission = 0 0
                emission = 0.3 1.2
                emission = 1.0 2 0 0
                speed = 0 1.2
                speed = 1 1.4
                energy = 0 0.5
                energy = 1 1
                logGrow
                {
                  density = 1 -0.9
                  density = 0.4 1
                  density = 0.05 5
                  density = 0.005 40
                }
                linGrow
                {
                  density = 0.05 0 0 0
                  density = 0.005 3
                  density = 0 30
                }
                size
                {
                  density = 0.05 1
                  density = 0.03 0.75
                  density = 0.02 0.65
                  density = 0.005 0.55
                  density = 0 0.44 0 0
                }

            }

            AUDIO
            {
                channel = Ship
                clip = sound_rocket_hard
                volume = 0 0
                volume = 1 0.9
                pitch = 0 0.2
                pitch = 1 1
                loop = true
            }
        }
        power_closed
        {
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = flameclosed
                modelName = RealPlume-Stock/SmokeScreen_MP_Nazari_FX/KWflamesmall
                transformName = thrustTransform
                localPosition = 0, 0, 0.4
                fixedScale = 0.75
                energy = 0 1
                energy = 1 2
                logGrow
                {
                  density = 1 -0.9
                  density = 0.4 1
                  density = 0.05 10
                  density = 0 40
                }
                linGrow
                {
                  density = 1 0
                  density = 0.5 10
                  density = 0 40
                 0 0
                }
                size
                {
                    density = 0.05 1
                    density = 0.03 0.75
                    density = 0.02 0.65
                    density = 0.005 0.55
                    density = 0 0.55 
                }
                energy
                {
                  density = 1  1
                  density = 0.5 0.8
                  density = 0 0.5
                }
                emission
                {
                  power = 1 1
                  power = 0 0
                  power = 0.01 0.2
                  density = 1 1
                  density = 0.5 0.5
                  density = 0 0.3
                }
                offset
                {
                  density = 1 0
                  density = 0.3 0.2
                  density = 0.1 0.3
                  density = 0 0.1
                }
            }

            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = rapier_smoke
                modelName = RealPlume-Stock/SmokeScreen_MP_Nazari_FX/smokebooster2
                transformName = thrustTransform
                fixedScale
                speed = 0.0 0.8
                speed = 1.0 1
                logGrow
                {
                  density = 1 -0.9
                  density = 0.4 1
                  density = 0.05 10
                  density = 0 40
                }
                linGrow
                {
                  density = 1 0
                  density = 0.5 10
                  density = 0 40
                 0 0
                }
                size
                {
                    density = 0.05 1
                    density = 0.03 0.75
                    density = 0.02 0.65
                    density = 0.005 0.55
                    density = 0 0.55 
                }
                energy
                {
                  density = 1  1
                  density = 0.5 0.8
                  density = 0 0.5
                }
                emission
                {
                  power = 1 1
                  power = 0 0
                  power = 0.01 0.2
                  density = 1 1
                  density = 0.5 0.1
                  density = 0 0
                }
                offset
                {
                  density = 1 0
                  density = 0.3 0.2
                  density = 0.1 0.3
                  density = 0 0.1
                }
            }

            AUDIO
            {
                channel = Ship
                clip = sound_rocket_spurts
                volume = 0 0
                volume = 1 0.8
                pitch = 0 0.15
                pitch = 1 0.75
                loop = true
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_medium
                volume = 1
                pitch = 2
                loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1
                pitch = 2
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = thrustTransform
                oneShot = true
                localOffset = 0, 0, 1.7
            }
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1
                pitch = 2
                loop = false
            }
        }
    }
}